{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/firebase/admin.ts"],"sourcesContent":["import { initializeApp, getApps, cert } from \"firebase-admin/app\";\nimport { getAuth } from \"firebase-admin/auth\";\n\nconst apps = getApps();\n\nconst app =\n  apps.length === 0\n    ? initializeApp({\n        credential: cert({\n          projectId: process.env.FIREBASE_PROJECT_ID || process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n          clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n          privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\n        }),\n      })\n    : apps[0];\n\nconst adminAuth = getAuth(app);\n\nexport { adminAuth };\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;;AAEA,MAAM,OAAO,IAAA,mNAAO;AAEpB,MAAM,MACJ,KAAK,MAAM,KAAK,IACZ,IAAA,yNAAa,EAAC;IACZ,YAAY,IAAA,gNAAI,EAAC;QACf,WAAW,QAAQ,GAAG,CAAC,mBAAmB;QAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;QAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;IAChE;AACF,KACA,IAAI,CAAC,EAAE;AAEb,MAAM,YAAY,IAAA,qNAAO,EAAC"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/auth/session.ts"],"sourcesContent":["import { cookies } from \"next/headers\";\nimport { adminAuth } from \"@/lib/firebase/admin\";\n\nconst SESSION_COOKIE_NAME = \"__session\";\nconst SESSION_EXPIRY_MS = 5 * 24 * 60 * 60 * 1000;\n\nexport async function createSessionCookie(idToken: string) {\n  const sessionCookie = await adminAuth.createSessionCookie(idToken, {\n    expiresIn: SESSION_EXPIRY_MS,\n  });\n\n  const cookieStore = await cookies();\n  cookieStore.set(SESSION_COOKIE_NAME, sessionCookie, {\n    maxAge: SESSION_EXPIRY_MS / 1000,\n    httpOnly: true,\n    secure: process.env.NODE_ENV === \"production\",\n    path: \"/\",\n    sameSite: \"lax\",\n  });\n\n  return sessionCookie;\n}\n\nexport async function getCurrentUser() {\n  const cookieStore = await cookies();\n  const sessionCookie = cookieStore.get(SESSION_COOKIE_NAME)?.value;\n\n  if (!sessionCookie) return null;\n\n  try {\n    const decodedClaims = await adminAuth.verifySessionCookie(sessionCookie, true);\n    const user = await adminAuth.getUser(decodedClaims.uid);\n    return {\n      uid: user.uid,\n      email: user.email || null,\n      displayName: user.displayName || null,\n      photoURL: user.photoURL || null,\n    };\n  } catch {\n    return null;\n  }\n}\n\nexport async function destroySession() {\n  const cookieStore = await cookies();\n  cookieStore.delete(SESSION_COOKIE_NAME);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;;;;;AAEA,MAAM,sBAAsB;AAC5B,MAAM,oBAAoB,IAAI,KAAK,KAAK,KAAK;AAEtC,eAAe,oBAAoB,OAAe;IACvD,MAAM,gBAAgB,MAAM,uIAAS,CAAC,mBAAmB,CAAC,SAAS;QACjE,WAAW;IACb;IAEA,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,YAAY,GAAG,CAAC,qBAAqB,eAAe;QAClD,QAAQ,oBAAoB;QAC5B,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACZ;IAEA,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,gBAAgB,YAAY,GAAG,CAAC,sBAAsB;IAE5D,IAAI,CAAC,eAAe,OAAO;IAE3B,IAAI;QACF,MAAM,gBAAgB,MAAM,uIAAS,CAAC,mBAAmB,CAAC,eAAe;QACzE,MAAM,OAAO,MAAM,uIAAS,CAAC,OAAO,CAAC,cAAc,GAAG;QACtD,OAAO;YACL,KAAK,KAAK,GAAG;YACb,OAAO,KAAK,KAAK,IAAI;YACrB,aAAa,KAAK,WAAW,IAAI;YACjC,UAAU,KAAK,QAAQ,IAAI;QAC7B;IACF,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,YAAY,MAAM,CAAC;AACrB"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/auth/session/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { createSessionCookie, destroySession, getCurrentUser } from \"@/lib/auth/session\";\nimport { adminAuth } from \"@/lib/firebase/admin\";\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { idToken } = await request.json();\n\n    if (!idToken || typeof idToken !== \"string\") {\n      return NextResponse.json({ error: \"Missing idToken\" }, { status: 400 });\n    }\n\n    const decodedToken = await adminAuth.verifyIdToken(idToken);\n    await createSessionCookie(idToken);\n\n    const user = await adminAuth.getUser(decodedToken.uid);\n\n    return NextResponse.json({\n      uid: user.uid,\n      email: user.email || null,\n      displayName: user.displayName || null,\n      photoURL: user.photoURL || null,\n    });\n  } catch (error: any) {\n    console.error(\"Session creation failed:\", error?.message);\n    return NextResponse.json({ error: \"Invalid token\" }, { status: 401 });\n  }\n}\n\nexport async function GET() {\n  try {\n    const user = await getCurrentUser();\n    if (!user) {\n      return NextResponse.json({ user: null }, { status: 200 });\n    }\n    return NextResponse.json({ user });\n  } catch {\n    return NextResponse.json({ user: null }, { status: 200 });\n  }\n}\n\nexport async function DELETE() {\n  await destroySession();\n  return NextResponse.json({ success: true });\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;;;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEtC,IAAI,CAAC,WAAW,OAAO,YAAY,UAAU;YAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,MAAM,eAAe,MAAM,uIAAS,CAAC,aAAa,CAAC;QACnD,MAAM,IAAA,+IAAmB,EAAC;QAE1B,MAAM,OAAO,MAAM,uIAAS,CAAC,OAAO,CAAC,aAAa,GAAG;QAErD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,KAAK,KAAK,GAAG;YACb,OAAO,KAAK,KAAK,IAAI;YACrB,aAAa,KAAK,WAAW,IAAI;YACjC,UAAU,KAAK,QAAQ,IAAI;QAC7B;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,4BAA4B,OAAO;QACjD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACrE;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO,MAAM,IAAA,0IAAc;QACjC,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,MAAM;YAAK,GAAG;gBAAE,QAAQ;YAAI;QACzD;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAK;IAClC,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,MAAM;QAAK,GAAG;YAAE,QAAQ;QAAI;IACzD;AACF;AAEO,eAAe;IACpB,MAAM,IAAA,0IAAc;IACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAK;AAC3C"}}]
}